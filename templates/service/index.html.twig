{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} - Manage Service{% endblock %}

{% block body %}
<div class="m-4 p-4 bg-gray-800 rounded-lg">
    {# ASSIGN modal_controller.js #}
    <div
        class="flex justify-between"
        data-controller="modal"
        {# PREVENT CACHE - right before Turbo takes its snapshot, it dispatches an event called turbo:before-cache and next call modal#close add @winodws for the global element #}
        data-action="turbo:before-cache@window->modal#close"
    >
        <h1 class="text-xl font-semibold text-white mb-4">Services</h1>
        {# ASSIGN modal_controller.js action open() #}
        <button 
            class="flex items-center space-x-1 bg-blue-500 hover:bg-blue-700 text-white text-sm font-bold px-4 rounded"
            data-action="click->modal#open"
        >
            <span>New Service</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 inline" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"/>
                <path d="M9 12h6"/>
                <path d="M12 9v6"/>
            </svg>
        </button>
        {# ASSIGN modal_controller.js proeprty target #}
        <dialog 
            data-modal-target="dialog"
            class="open:flex bg-gray-800 rounded-lg shadow-xl inset-0 w-full md:w-fit md:max-w-[50%] md:min-w-[50%] animate-fade-in backdrop:bg-slate-600 backdrop:bg-opacity-80 backdrop:backdrop-blur-sm"
            {# 
                ASSIGN close model method
                for close dialog via click mouse out of the dialog box add click->modal#closeOutside
            #}
            data-action="close->modal#close"
        >
            <div class="flex grow p-5">
                <div class="grow overflow-auto p-1">
                    <div class="text-white space-y-4">
                        <div class="flex justify-between items-center">
                            <h2 class="text-xl font-bold">
                            Create new Service
                            </h2>
                            <form method="dialog">
                                <button class="text-lg absolute top-5 right-5">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                        <path d="M18 6l-12 12"/>
                                        <path d="M6 6l12 12"/>
                                    </svg>
                                </button>
                            </form>
                        </div>
                        <p class="text-gray-400">
                        Join us on an exciting journey through the cosmos! Discover the mysteries of the universe and explore distant galaxies.
                        </p>
                        <div class="flex justify-end">
                            <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                            Let's Go!
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </dialog>
    </div>
    <table class="min-w-full bg-gray-800 text-white">
        <thead class="border-b border-gray-700">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Id</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Client Point</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Description</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">endedAt</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-600">
            {% for service in services %}
                <tr class="even:bg-gray-700 odd:bg-gray-600">
                    <td class="px-6 py-4 whitespace-nowrap">{{ service.id }}</td>
                    <td class="px-6 py-4">{{ service.clientPoint.name }}</td>
                    <td class="px-6 py-4">{{ service.description }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{ service.endedAt ? service.endedAt|date('Y-m-d H:i:s') : '' }}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <a href="{{ path('app_service_show', {'id': service.id}) }}" class="text-blue-400 hover:text-blue-600">show</a>
                        <a href="{{ path('app_service_edit', {'id': service.id}) }}" class="ml-4 text-yellow-400 hover:text-yellow-600">edit</a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4" class="px-6 py-4 whitespace-nowrap text-center text-gray-400">No records found</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
